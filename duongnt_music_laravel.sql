--
-- Script was generated by Devart dbForge Studio 2022 for MySQL, Version 9.1.21.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 3/15/2023 6:31:19 PM
-- Server version: 8.0.30
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE duongnt_music_laravel;

--
-- Drop table `migrations`
--
DROP TABLE IF EXISTS migrations;

--
-- Drop table `password_resets`
--
DROP TABLE IF EXISTS password_resets;

--
-- Drop table `personal_access_tokens`
--
DROP TABLE IF EXISTS personal_access_tokens;

--
-- Drop table `playlists`
--
DROP TABLE IF EXISTS playlists;

--
-- Drop table `transactions`
--
DROP TABLE IF EXISTS transactions;

--
-- Drop table `users`
--
DROP TABLE IF EXISTS users;

--
-- Drop table `songs`
--
DROP TABLE IF EXISTS songs;

--
-- Drop table `categories`
--
DROP TABLE IF EXISTS categories;

--
-- Drop table `albums`
--
DROP TABLE IF EXISTS albums;

--
-- Drop table `singers`
--
DROP TABLE IF EXISTS singers;

--
-- Set default database
--
USE duongnt_music_laravel;

--
-- Create table `singers`
--
CREATE TABLE singers (
  id bigint UNSIGNED NOT NULL AUTO_INCREMENT,
  name varchar(60) NOT NULL,
  dob date DEFAULT NULL,
  introduction text DEFAULT NULL,
  image_path varchar(255) NOT NULL,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 9,
AVG_ROW_LENGTH = 2730,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create table `albums`
--
CREATE TABLE albums (
  id bigint UNSIGNED NOT NULL AUTO_INCREMENT,
  name varchar(60) NOT NULL,
  description text DEFAULT NULL,
  image_path varchar(255) NOT NULL,
  singer_id bigint UNSIGNED NOT NULL,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 8,
AVG_ROW_LENGTH = 2730,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE albums
ADD CONSTRAINT albums_singer_id_foreign FOREIGN KEY (singer_id)
REFERENCES singers (id);

--
-- Create table `categories`
--
CREATE TABLE categories (
  id bigint UNSIGNED NOT NULL AUTO_INCREMENT,
  name varchar(60) NOT NULL,
  description text DEFAULT NULL,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 7,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create table `songs`
--
CREATE TABLE songs (
  id bigint UNSIGNED NOT NULL AUTO_INCREMENT,
  name varchar(100) NOT NULL,
  introduction text DEFAULT NULL,
  image_path varchar(255) NOT NULL,
  music_path varchar(255) NOT NULL,
  price int UNSIGNED NOT NULL DEFAULT 0,
  singer_id bigint UNSIGNED NOT NULL,
  album_id bigint UNSIGNED DEFAULT NULL,
  category_id bigint UNSIGNED DEFAULT NULL,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 9,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE songs
ADD CONSTRAINT songs_album_id_foreign FOREIGN KEY (album_id)
REFERENCES albums (id) ON DELETE SET NULL;

--
-- Create foreign key
--
ALTER TABLE songs
ADD CONSTRAINT songs_category_id_foreign FOREIGN KEY (category_id)
REFERENCES categories (id) ON DELETE SET NULL;

--
-- Create foreign key
--
ALTER TABLE songs
ADD CONSTRAINT songs_singer_id_foreign FOREIGN KEY (singer_id)
REFERENCES singers (id);

--
-- Create table `users`
--
CREATE TABLE users (
  id bigint UNSIGNED NOT NULL AUTO_INCREMENT,
  name varchar(60) NOT NULL,
  email varchar(255) NOT NULL,
  phonenumber varchar(60) DEFAULT NULL,
  password varchar(255) NOT NULL,
  wallet int UNSIGNED NOT NULL DEFAULT 0,
  role tinyint UNSIGNED NOT NULL DEFAULT 0,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 14,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create index `users_email_unique` on table `users`
--
ALTER TABLE users
ADD UNIQUE INDEX users_email_unique (email);

--
-- Create table `transactions`
--
CREATE TABLE transactions (
  id bigint UNSIGNED NOT NULL AUTO_INCREMENT,
  cost int NOT NULL,
  date datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  song_id bigint UNSIGNED NOT NULL,
  user_id bigint UNSIGNED NOT NULL,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE transactions
ADD CONSTRAINT transactions_song_id_foreign FOREIGN KEY (song_id)
REFERENCES songs (id);

--
-- Create foreign key
--
ALTER TABLE transactions
ADD CONSTRAINT transactions_user_id_foreign FOREIGN KEY (user_id)
REFERENCES users (id);

--
-- Create table `playlists`
--
CREATE TABLE playlists (
  id bigint UNSIGNED NOT NULL AUTO_INCREMENT,
  song_id bigint UNSIGNED NOT NULL,
  user_id bigint UNSIGNED NOT NULL,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE playlists
ADD CONSTRAINT playlists_song_id_foreign FOREIGN KEY (song_id)
REFERENCES songs (id) ON DELETE CASCADE;

--
-- Create foreign key
--
ALTER TABLE playlists
ADD CONSTRAINT playlists_user_id_foreign FOREIGN KEY (user_id)
REFERENCES users (id) ON DELETE CASCADE;

--
-- Create table `personal_access_tokens`
--
CREATE TABLE personal_access_tokens (
  id bigint UNSIGNED NOT NULL AUTO_INCREMENT,
  tokenable_type varchar(255) NOT NULL,
  tokenable_id bigint UNSIGNED NOT NULL,
  name varchar(255) NOT NULL,
  token varchar(64) NOT NULL,
  abilities text DEFAULT NULL,
  last_used_at timestamp NULL DEFAULT NULL,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create index `personal_access_tokens_token_unique` on table `personal_access_tokens`
--
ALTER TABLE personal_access_tokens
ADD UNIQUE INDEX personal_access_tokens_token_unique (token);

--
-- Create index `personal_access_tokens_tokenable_type_tokenable_id_index` on table `personal_access_tokens`
--
ALTER TABLE personal_access_tokens
ADD INDEX personal_access_tokens_tokenable_type_tokenable_id_index (tokenable_type, tokenable_id);

--
-- Create table `password_resets`
--
CREATE TABLE password_resets (
  email varchar(255) NOT NULL,
  token varchar(255) NOT NULL,
  created_at timestamp NULL DEFAULT NULL
)
ENGINE = INNODB,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create index `password_resets_email_index` on table `password_resets`
--
ALTER TABLE password_resets
ADD INDEX password_resets_email_index (email);

--
-- Create table `migrations`
--
CREATE TABLE migrations (
  id int UNSIGNED NOT NULL AUTO_INCREMENT,
  migration varchar(255) NOT NULL,
  batch int NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 10,
AVG_ROW_LENGTH = 1820,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

-- 
-- Dumping data for table singers
--
INSERT INTO singers VALUES
(1, 'Taylor Swift', '1990-09-23', NULL, '1678692428-Taylor Swift.jpg', '2023-03-12 07:47:26', '2023-03-13 07:27:08'),
(3, 'Westlife', NULL, NULL, '1678619123-Westlife.jpg', '2023-03-12 11:05:23', '2023-03-12 11:05:23'),
(4, 'Ed Sheeran', NULL, NULL, '1678641759-Ed Sheeran.jpg', '2023-03-12 17:22:39', '2023-03-12 17:22:39'),
(5, 'Avicii', NULL, NULL, '1678641779-Avicii.jpg', '2023-03-12 17:22:59', '2023-03-12 17:22:59'),
(6, 'Charlie Puth', NULL, NULL, '1678680170-Charlie Puth.jpg', '2023-03-13 04:02:50', '2023-03-13 04:02:50'),
(7, 'Rokudenashi', NULL, NULL, '1678680278-Rokudenashi.jpg', '2023-03-13 04:04:38', '2023-03-13 04:04:38'),
(8, 'Ellie Goulding', NULL, NULL, '1678680320-Ellie Goulding.jpg', '2023-03-13 04:05:20', '2023-03-13 04:05:20');

-- 
-- Dumping data for table categories
--
INSERT INTO categories VALUES
(3, 'Rock', NULL, '2023-03-12 17:21:36', '2023-03-12 17:21:36'),
(4, 'Lofi', NULL, '2023-03-12 17:21:51', '2023-03-12 17:21:51'),
(6, 'Pop Music', NULL, '2023-03-13 07:36:36', '2023-03-13 07:36:36');

-- 
-- Dumping data for table albums
--
INSERT INTO albums VALUES
(2, 'Speak Now', NULL, '1678616135-Speak Now.png', 1, '2023-03-12 10:15:35', '2023-03-12 10:15:35'),
(3, 'Fearless', NULL, '1678692663-Fearless.png', 1, '2023-03-13 07:31:03', '2023-03-13 07:31:03'),
(4, 'Fast & Furious 7', NULL, '1678692677-Fast & Furious 7.jpg', 6, '2023-03-13 07:31:17', '2023-03-13 07:31:17'),
(5, 'Brightest Blue', NULL, '1678692932-Brightest Blue.png', 8, '2023-03-13 07:35:32', '2023-03-13 07:35:32'),
(6, 'Love Me Like You Do', NULL, '1678692961-Love Me Like You Do.png', 8, '2023-03-13 07:36:01', '2023-03-13 07:36:01'),
(7, 'Coast To Coast', NULL, '1678693441-Coast To Coast.jpg', 3, '2023-03-13 07:44:01', '2023-03-13 07:44:01');

-- 
-- Dumping data for table users
--
INSERT INTO users VALUES
(2, 'Admin', 'admin@gmail.com', '1234567890', '$2y$10$T8oFNbb8RhnyxgSfYpDSxeTtwgGNdrDBYrkgltyvjoRdXhgDLY4MO', 0, 1, '2023-03-12 07:43:19', '2023-03-12 07:43:19'),
(4, 'User', 'duong1234@gmail', NULL, '$2y$10$Z7QYUCBZV5jqsALnLKSiK.iwxnhMPW4rXYrUxejJmAcBFmtfarkPm', 99940, 0, '2023-03-14 01:43:15', '2023-03-15 10:27:54'),
(5, 'Thái Dương', 'duong123@gmail.com', '02312312312312', '$2y$10$kGFte7aUCxKprZ70H7ptweao529pnb/E/kEN0iFgGac2VK27fw496', 0, 0, '2023-03-14 04:00:07', '2023-03-14 04:00:07'),
(6, 'Nguyễn Văn Chiến', 'chien@gmail.com', '12313123', '$2y$10$URkI2zverOLvNpwMCpyii.IY4pg.iDn6UeHYGvM45AHQTXZgQS3Te', 0, 0, '2023-03-15 02:54:18', '2023-03-15 02:54:18'),
(7, 'Charlie Puth', 'silverwolf113@gmail.com', '123', '$2y$10$3baZoN8BkP1h.mva34VQ7..VrjnQIcg0XWzUczMKNBKxD/ofsWbui', 0, 0, '2023-03-15 02:56:04', '2023-03-15 02:56:04'),
(10, 'Phúc Du', 'phuc@gmail', '123412312', '$2y$10$YuvoUx2gx4.Adwc7nG4rY.z16Z1RpZy3Gmr8OQ0bQI/UtJz3pq8.2', 0, 0, '2023-03-15 03:24:22', '2023-03-15 03:24:22'),
(11, 'Hải', 'abc@gmail.com', '12314312', '$2y$10$WbH/V693q2MRFEb9tMkBFu1suevNZW4Okb0S8qxdmbzjFxSDUASEC', 19920, 0, '2023-03-15 03:33:34', '2023-03-15 09:00:26'),
(12, 'Charlie Puth', 'chali@gmail.com', '97873783', '$2y$10$JTpbP.n26wMNjLCKHcZl8eM33yDBBRJ2YqXl4J9/XB9g5rsH8fwr.', 0, 0, '2023-03-15 09:10:27', '2023-03-15 09:10:27');

-- 
-- Dumping data for table songs
--
INSERT INTO songs VALUES
(3, 'Love Story', NULL, '1678691857-Love Story.jpg', '1678691857-Love Story.mp3', 20, 1, 3, 6, '2023-03-13 07:17:37', '2023-03-13 07:36:48'),
(4, 'Love Me Like You Do', NULL, '1678693070-Love Me Like You Do.png', '1678693070-Love Me Like You Do.mp3', 30, 8, 6, 6, '2023-03-13 07:37:50', '2023-03-13 07:37:50'),
(5, 'Burn', NULL, '1678693118-Burn.png', '1678693118-Burn.mp3', 30, 8, 5, 6, '2023-03-13 07:38:38', '2023-03-13 07:38:38'),
(6, 'My Love', NULL, '1678693483-My Love.jpg', '1678693483-My Love.mp3', 50, 3, 7, 6, '2023-03-13 07:44:43', '2023-03-13 07:44:43'),
(7, 'I Lay My Love On You', NULL, '1678693524-I Lay My Love On You.jpg', '1678693524-I Lay My Love On You.mp3', 50, 3, 7, 6, '2023-03-13 07:45:24', '2023-03-13 07:45:24'),
(8, 'See You Again', NULL, '1678774274-See You Again.jpg', '1678774274-See You Again.mp3', 60, 6, 4, 6, '2023-03-14 06:11:14', '2023-03-14 06:11:14');

-- 
-- Dumping data for table transactions
--
INSERT INTO transactions VALUES
(1, 50, '2023-03-15 15:29:58', 7, 11, '2023-03-15 08:29:58', NULL),
(2, 30, '2023-03-15 16:00:26', 4, 11, '2023-03-15 09:00:26', NULL),
(3, 60, '2023-03-15 17:27:54', 8, 4, '2023-03-15 10:27:54', NULL);

-- 
-- Dumping data for table playlists
--
INSERT INTO playlists VALUES
(5, 7, 5, NULL, NULL),
(6, 6, 5, NULL, NULL),
(8, 5, 4, NULL, NULL),
(9, 7, 11, NULL, NULL),
(10, 4, 11, NULL, NULL);

-- 
-- Dumping data for table personal_access_tokens
--
-- Table duongnt_music_laravel.personal_access_tokens does not contain any data (it is empty)

-- 
-- Dumping data for table password_resets
--
-- Table duongnt_music_laravel.password_resets does not contain any data (it is empty)

-- 
-- Dumping data for table migrations
--
INSERT INTO migrations VALUES
(1, '2014_10_12_000000_create_users_table', 1),
(2, '2014_10_12_100000_create_password_resets_table', 1),
(3, '2019_12_14_000001_create_personal_access_tokens_table', 1),
(4, '2023_03_08_145934_create_singers_table', 1),
(5, '2023_03_08_151207_create_categories_table', 1),
(6, '2023_03_08_151503_create_albums_table', 1),
(7, '2023_03_08_152108_create_songs_table', 1),
(8, '2023_03_08_153441_create_playlists_table', 1),
(9, '2023_03_08_153632_create_transactions_table', 1);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;